## 1 ClassLoader
   Java ClassLoader - это абстрактный класс. Он принадлежит к пакету java.lang. Он загружает классы из разных ресурсов. Java ClassLoader используется для загрузки классов во время выполнения. Другими словами, JVM выполняет процесс связывания во время выполнения. Классы загружаются в JVM по мере необходимости. Если загруженный класс зависит от другого класса, этот класс также загружается. Когда запрашивается загрузка класса, он делегирует класс своему родителю.
## 2 Механизм загрузки
   Согласно спецификации Java SE для того, чтобы получить работающий код в JVM, необходимо выполнить три этапа:
   a. Загрузка байт-кода из ресурсов и создание экземпляра класса Class.
   Сюда входит:
   поиск запрошенного класса среди загруженных ранее
   получение байт-кода для загрузки и проверка его корректности
   создание экземпляра класса Class (для работы с ним в runtime)
   загрузка родительских классов. Если родительские классы и интерфейсы не были загружены, то и рассматриваемый класс считается не загруженным.
   b. Связывание (или линковка)
   По спецификации этот этап разбивается еще на три стадии:
   Verification, происходит проверка корректности полученного байт-кода.
   Preparation, выделение оперативной памяти под статические поля и инициализация их значениями по умолчанию (при этом явная инициализация, если она есть, происходит уже на этапе инициализации).
   Resolution, разрешение символьных ссылок типов, полей и методов.

c. Инициализация полученного объекта
## 3 Типы загрузчиков
В Java существует три стандартных загрузчика, каждый из которых осуществляет загрузку класса из определенного места:
Bootstrap – базовый загрузчик, также называется Primordial ClassLoader. Загружает стандартные классы JDK из архива rt.jar
Extension ClassLoader – загрузчик расширений. Загружает классы расширений, которые по умолчанию находятся в каталоге jre/lib/ext, но могут быть заданы системным свойством java.ext.dirs
System ClassLoader – системный загрузчик. Загружает классы приложения, определенные в переменной среды окружения CLASSPATH

## 4 Принципы загрузчиков
Java ClassLoader основан на трех принципах: делегирование, видимость и уникальность.
Принцип делегирования: он пересылает запрос на загрузку класса загрузчику родительского класса. Он загружает класс только в том случае, если родитель не находит или не загружает класс.
Принцип видимости: он позволяет загрузчику дочерних классов видеть все классы, загруженные родительским ClassLoader. Но загрузчик родительских классов не может видеть классы, загруженные загрузчиком дочерних классов.
Принцип уникальности: позволяет загрузить класс один раз. Это достигается принципом делегирования. Это гарантирует, что дочерний ClassLoader не перезагрузит класс, который уже загружен родителем.
## 5 Роли загрузчиков
В Java используется иерархия загрузчиков классов, где корневым, является базовый. Далее следует загрузчик расширений, а за ним уже системный. Естественно, каждый загрузчик хранит указатель на родительский для того, чтобы смочь делегировать ему загрузку в том случае, если сам будет не в состоянии этого сделать. Каждый загрузчик хранит список загруженных им классов.
## 6 Процесс загрузки
1) Системный загрузчик попытается поискать в кеше класс Student.
   1.1) Если класс найден, загрузка окончена.
   1.2) Если класс не найден, загрузка делегируется загрузчику расширений.
2) Загрузчик расширений попытается поискать в кеше класс Student.
   2.1) Если класс найден, загрузка окончена.
   2.2) Если класс не найден, загрузка делегируется базовому загрузчику.
3) Базовый загрузчик попытается поискать в кеше класс Student.
   3.1) Если класс найден, загрузка окончена.
   3.2) Если класс не найден, базовый загрузчик попытается его загрузить.
   3.2.1) Если загрузка прошла успешно, она закончена
   3.2.2) Иначе управление передается загрузчику расширений.
   3.3) Загрузчик расширений пытается загрузить класс.
   3.3.1) Если загрузка прошла успешно, она закончена
   3.3.2) Иначе управление передается системному загрузчику.
   3.4) Системный загрузчик пытается загрузить класс.
   3.4.1) Если загрузка прошла успешно, она закончена
   3.4.2) Иначе генерируется исключение java.lang.ClassNotFoundException.
 ## 7 Жизненный цикл
   В большинстве случаев, жизненный цикл класса в виртуальной машине схож с жизненным циклом объекта. JVM загружает, связывает и инициализирует классы, позволяя программе пользоваться ими, и выгружает, когда в приложении они более не используется. Важно заметить, что выгрузка классов не работает в том случае, если класс был загружен Bootstrap загрузчиком.
   Загруженные классы, несмотря на то, что являются полноценными Java-объектами, хранятся в особой системной области памяти, называемой permanent generation (сокращенно, PermGen) и управляемой сборщиком мусора.
   8 Пользовательский загрузчик
   Если в системе присутствуют пользовательские загрузчики, они должны:
   a. расширять класс java.lang.ClassLoader;
   b. поддерживать модель динамической загрузки.

Примеры использования пользовательского загрузчика:
Автоматическая проверка цифровой подписи перед выполнением ненадежного кода
Расшифровывать код на основе пароля, предоставленного пользователем
Динамически создавать классы в соответствии с потребностями пользователей
Проверка версии класса перед загрузкой
## 9 Типы исключений
При работе загрузчиков классов наиболее часто встречаются следующие исключения:
1.  ClassNotFoundException, бросается, когда приложение пытается загрузиться класс по его названию (String) с помощью таких средств:
    forName метод в классе Class.
    findSystemClass метод в классе ClassLoader.
    loadClass метод в классе ClassLoader.

2.  NoClassDefFoundError, бросается в таких случаях:
    Когда архив, директория, или другой источник необходимых классов не был добавлен в источники текущего загрузчика классов или его предка.
    Загрузчик-предок не был установлен корректно.
