## XML парсеры, различия
   ## 1.1. Что такое XML парсер?
   Xml парсер - это программа, которая извлекает из исходного файла xml формата данные и сохраняет или использует для последующих действий.
   XML Parser предоставляет способ доступа или изменения данных в документе XML. Java предоставляет несколько опций для анализа XML-документов.
   Типы синтаксических анализаторов:
   Dom Parser — анализирует XML-документ, загружая все содержимое документа и создавая его полное иерархическое дерево в памяти.
   SAX Parser — анализирует XML-документ по триггерам на основе событий. Не загружает полный документ в память.
   Анализатор JDOM — анализирует XML-документ аналогично анализатору DOM, но более простым способом.
   StAX Parser — анализирует XML-документ аналогично SAX-анализатору, но более эффективным способом.
   Анализатор XPath — анализирует XML-документ на основе выражения и широко используется в сочетании с XSLT.
   DOM4J Parser — библиотека Java для анализа XML, XPath и XSLT с использованием Java Collections Framework. Он обеспечивает поддержку DOM, SAX и JAXP.
   ## 1.2. Что такое DOM? Как он работает, когда использовать?
   DOM (Document Object Model — «объектная модель документа») — это независящий от платформы и языка программный интерфейс, позволяющий программам и скриптам получить доступ к содержимому HTML-, XHTML- и XML-документов, а также изменять содержимое, структуру и оформление таких документов.
   Необходимо использовать DOM-парсер, когда —
   Нужно много знать о структуре документа.
   Нужно перемещать части XML-документа (например, можно отсортировать определенные элементы).
   Нужно использовать информацию в документе XML более одного раза.
  ##  1.3. Что такое SAX парсер? Как работает, когда использовать.
   SAX (Simple API для XML) — это анализатор на основе событий для документов XML. В отличие от парсера DOM, парсер SAX не создает дерева разбора. SAX — это потоковый интерфейс для XML – приложения, использующие SAX, получают уведомления о событиях, когда XML-документ обрабатывает элемент и атрибут, в одно и то же время в последовательном порядке, начиная с верхней части документа и заканчивая закрытием Root элемент.
   Читает XML-документ сверху вниз, распознавая токены, которые составляют правильно сформированный XML-документ.
   Токены обрабатываются в том же порядке, в котором они появляются в документе.
   Сообщает прикладной программе о природе токенов, с которыми анализатор сталкивался по мере их появления.
   Прикладная программа предоставляет обработчик «events», который должен быть зарегистрирован парсером.
   Когда токены идентифицированы, методы обратного вызова в обработчике вызываются с соответствующей информацией.
   Необходимо использовать парсер SAX, когда —
   Можете обрабатывать XML-документ линейно сверху вниз.
   Документ не является глубоко вложенным.
   Обрабатываете очень большой XML-документ (дерево DOM будет занимать слишком много памяти).
   Проблема, которая должна быть решена, включает в себя только часть XML-документа.
   Данные становятся доступными, как только они видятся синтаксическим анализатором, поэтому SAX хорошо работает для XML-документа, который поступает через поток.
   Недостатки SAX
   Нет произвольного доступа к документу XML, так как он обрабатывается только для пересылки.
   Если нужно отслеживать данные, которые анализатор видел, или изменять порядок элементов, вы должны написать код и сохранить данные самостоятельно.
  ## 1.4. Разница между DOM и SAX. Преимущества и недостатки каждого.
   DOM отображает XML-документы с иерархической объектной моделью. SAX превращает элементы в документе в объекты для обработки.
   DOM загружает документ в память для обработки, в то время как SAX наоборот: он может обнаружить предстоящий поток XML, поэтому он не требует загрузки всего кода XML в память одновременно.
   Выбор между DOM и SAX:
   При изменении в данных и выводе их в виде XML – DOM лучший выбор. Можно изменить данные с помощью SAX, но процесс намного сложнее, потому что нужно сделать копию данных, а не вносить изменения в сами данные.
   Для больших файлов лучше выбрать SAX.
   Если будет использоваться только небольшая часть данных – лучше использовать SAX.
   Реализации SAX обычно быстрее, чем реализации DOM.
  ## 1.5. Что такое StAX парсер?
StAX — это API на основе Java для анализа XML-документа аналогично SAX-анализатору.
   1.6. Разница между парсерами SAX и StAX. Когда использовать. Лучшая практика.
   StAX — это API-интерфейс PULL, а SAX — это API-интерфейс PUSH. Это означает, что в случае синтаксического анализатора StAX клиентское приложение должно запрашивать синтаксический анализатор StAX для получения информации из XML всякий раз, когда это необходимо. В случае SAX, клиентское приложение должно получать информацию, когда парсер SAX уведомляет клиентское приложение о том, что информация доступна.
   StAX API может читать и писать документы XML. Используя SAX API, XML-файл можно только читать.
##  XML документы
  XML — используется в SOAP (всегда) и REST-запросах (реже);
    JSON — используется в REST-запросах.
  ##  2.1. Что такое XML документ?
XML (с англ eXtensible Markup Language) — расширяемый язык разметки. Используется для хранения и передачи данных. XML разрабатывался как язык с простым формальным синтаксисом, удобный для создания и обработки документов как программами так и человеком, с акцентом на использование в Интернете. Язык называется расширяемым, поскольку он не фиксирует разметку, используемую в документах: разработчик волен создать разметку в соответствии с потребностями к конкретной области, будучи ограниченным лишь синтаксическими правилами языка. Расширение XML — это конкретная грамматика, созданная на базе XML и представленная словарём тегов и их атрибутов, а также набором правил, определяющих, какие атрибуты и элементы могут входить в состав других элементов.
 ##   2.2.  Различия между XML и HTML?
Различие HTML и XML - в назначении.
    Основное назначение HTML - представление информации в окне обозревателя и организация связей между документами. Большинство тегов из фиксированного набора служат для форматирования текста. HTML, это конкретный (не расширяемый) язык. Функциональность тегов разметки в нем фиксирована.
    Основная цель XML - структурная и семантическая разметка. В его спецификации не фиксируется функциональная специализация элементов XML-документов, их атрибутов и семантика значений атрибутов. Именно путем конкретизации функциональности и синтаксиса элементов XML-документов можно расширять функциональность языка XML.

HTML
XML
не все теги являются парными (<BR>)
каждый начальный тег должен иметь соответствующий конечный
большие и маленькие буквы в названии тегов не различаются
большие и маленькие буквы в названии тегов различаются
допускается перекрытие элементов (<B>11 <I> 22 </B> 33 </I>)
перекрытие не допускается, строгая вложенность
может быть несколько элементов верхнего уровня (<HEAD>11</HEAD><BODY>22</BODY>)
имеется только один элемент верхнего уровня - "корневой" элемент
значения атрибутов могут быть без кавычек или отсутствовать
значения атрибутов обязательно должны быть в кавычках (или апострофах)
возможно несколько одинаковых атрибутов (<FONT color=red color=blue>)
в теге может быть только один атрибут с данным ключевым словом

## 2.3. Версия в XML, значение.
Декларация XML содержит детали, которые подготавливают анализатор XML к анализу документа XML. Это необязательно, но при использовании он должен отображаться в первой строке документа XML.
<?xml
   version = "version_number"
   encoding = "encoding_declaration"
   standalone = "standalone_status"
?>
Version (Версия) - определяет версию используемого стандарта XML.
Encoding (Кодировка) - определяет кодировку символов, используемую в документе. UTF-8 — используемая кодировка по умолчанию.
Standalone - сообщает синтаксическому анализатору, использует ли документ информацию из внешнего источника, такого как определение типа внешнего документа (DTD), для своего содержимого. По умолчанию установлено значение no . Установка его в yes указывает процессору, что для синтаксического анализа документа не требуется никаких внешних объявлений.
Декларация XML должна соответствовать следующим правилам:
Если декларация XML присутствует в XML, она должна быть помещена в качестве первой строки в документе XML.
Если объявление XML включено, оно должно содержать атрибут номера версии.
Имена и значения параметров чувствительны к регистру.
Имена всегда в нижнем регистре.
Порядок размещения параметров важен. Правильный порядок: версия, кодировка и автономный.
Можно использовать как одинарные, так и двойные кавычки.
В декларации XML нет закрывающего тега, т.е. </? Xml>
## 2.4. Преимущества и недостатки XML.
Достоинства
XML – язык разметки, позволяющий стандартизировать вид файлов-данных, используемых компьютерными программами, в виде текста, понятного человеку.
XML поддерживает Юникод;
В формате XML могут быть описаны такие структуры данных, как записи, списки и деревья;
XML – это самодокументируемый формат, который описывает структуру и имена полей так же как и значения полей.
XML имеет строго определенный синтаксис и требования к анализу, что позволяет ему оставаться простым, эффективным и непротиворечивым. Одновременно с этим, разные разработчики не ограничены в выборе экспрессивных методов (например, можно моделировать данные, помещая значения в параметры тегов или в тело тегов, можно использовать различные языки и нотации для именования тегов и т. д.);
XML – формат, основанный на международных стандартах.
Иерархическая структура XML подходит для описания практически любых типов документов, кроме аудио и видео мультимедийных потоков, растровых изображений, сетевых структур данных и двоичных данных;
XML представляет собой простой текст, свободный от лицензирования и каких-либо ограничений.
XML не зависит от платформы.
XML является подмножеством SGML (который используется с 1986 года). Уже накоплен большой опыт работы с языком и созданы специализированные приложения;
XML не накладывает требований на порядок расположения атрибутов в элементе и вложенных элементов разных типов, что существенно облегчает выполнение требований обратной совместимости.
В отличие от бинарных форматов, XML содержит метаданные об именах, типах и классах описываемых объектов, по которым приложение может обработать документ неизвестной структуры (например, для динамического построения интерфейсов);
XML имеет реализации парсеров для всех современных языков программирования;
Существует стандартный механизм преобразования XSLT, реализации которого встроены в браузеры, операционные системы, web-серверы.
XML поддерживается на низком аппаратном, микропрограммном и программном уровнях в современных аппаратных решениях.
Недостатки
1. Синтаксис XML избыточен.
   Размер XML-документа существенно больше бинарного представления тех же данных.
   Размер XML-документа существенно больше, чем документа в альтернативных текстовых форматах передачи данных (например JSON, YAML, Protocol Buffers) и особенно в форматах данных, оптимизированных для конкретного случая использования.
   Избыточность XML может повлиять на эффективность приложения. Возрастает стоимость хранения, обработки и передачи данных.
   XML содержит метаданные (об именах полей, классов, вложенности структур), и одновременно XML позиционируется как язык взаимодействия открытых систем. При передаче между системами большого количества объектов одного типа (одной структуры), передавать метаданные повторно нет смысла, хотя они содержатся в каждом экземпляре XML описания.
   Для большого количества задач не нужна вся мощь синтаксиса XML и можно использовать значительно более простые и производительные решения.
2. Неоднозначность моделирования.
   Нет общепринятой методологии для моделирования данных в XML, в то время как для реляционной модели и объектно-ориентированной такие средства разработаны и базируются на реляционной алгебре, системном подходе и системном анализе.
   В природе есть множество объектов и явлений, для описания которых разные структуры данных (сетевая, реляционная, иерархическая) являются естественными, и отображение объекта в неестественную для него модель является болезненным для его сути. В случае с реляционной и иерархической моделями определены процедуры декомпозиции, обеспечивающие относительную однозначность, чего нельзя сказать о сетевой модели.
   В результате большой гибкости языка и отсутствия строгих ограничений, одна и та же структура может быть представлена множеством способов (различными разработчиками), например, значение может быть записано как атрибут тега или как тело тега и т. д.
   Поддержка многих языков в именовании тегов дает возможность назвать, например вес русским словом, в таком случае компьютер никак не сможет установить соответствия этого поля с полем weight в англоязычной версии программы и с полями в версиях модели объекта на множестве других языков.
3. XML не содержит встроенной в язык поддержки типов данных. В нем нет строгой типизации, то есть понятий «целых чисел», «строк», «дат», «булевых значений» и т. д.
4. Иерархическая модель данных, предлагаемая XML, ограничена по сравнению с реляционной моделью и объектно-ориентированными графами и сетевой моделью данных.
5. Пространства имён XML сложно использовать и их сложно реализовывать в XML-парсерах.
6. Существуют другие, обладающие сходными с XML возможностями, текстовые форматы данных, которые обладают более высоким удобством чтения человеком или большей компактностью (YAML, JSON, SweetXM, XF).
 ##  2.5. Well-formed (синтаксически корректный) XML.
   XML-документ имеет ровно один корневой элемент, в котором лежат все остальные.
   Все открытые теги обязаны быть закрыты.
   Для одиночных тегов (типа <br>) , чтобы отличать их от открывающих, предусмотрена специальная запись: <br/>. Но можно написать и полностью <br></br>
   Имена тегов регистрозависимые.
   Теги не могут нарушать вложенность.
   Все атрибуты тегов обязаны быть заключены в двойные кавычки (").
   Есть три символа - <, > и &, которые обязаны быть экранированы везде с помощью &lt;, &gt; и &amp;. А внутри атрибутов надо экранировать еще и двойную кавычку с помощью &quot;.
   Все символы в документе обязаны соответствовать заявленной кодировке.
##   2.6. Валидность Xml.
   Валидность - это синтаксические правила корректности конкретных XML и SGML языков.
   "Валидный" XML документ — это "синтаксически верный" XML документ, который также соответствует правилам DTD (определениям типов документов).
   !!! Валидный XML документ не то же самое, что и синтаксически верный XML документ.
   XML документ должен быть синтаксически верным.
   XML документ должен соответствовать определенному типу документов.
   Правила, определяющие допустимые элементы и атрибуты для XML документа, часто называются определениями документа или схемами документа.
 ##  2.7. Разница между DTD и XSD.
   В XML DTD означает определение типа документа, а XSD - определение схемы XML. DTD - это набор объявлений разметки, которые определяют тип документа для языка разметки семейства SGML. XSD определяет, как формально описывать элементы в документе Extensible Markup Language. В ключевое отличие между DTD и XSD заключается в том, что DTD можно использовать для определения структуры, а XSD - для определения структуры и содержимого.
   DTD – Document Type Definition. Он используется для точного описания языка XML. Основная цель DTD - определить структуру XML-файла. Он содержит список юридических элементов. Он также используется для проверки.
   Два типа DTD:
   внутренними – элементы DTD объявлены в файле XML
   внешними – элементы DTD объявлены в каком-то другом файле.
   XSD означает определение схемы XML. Он используется для определения структуры и содержимого файлов XML. Это метод выражения ограничений XML-файла. XSD похож на DTD, но обеспечивает больший контроль над структурой XML.
   Два типа файлов XSD:
   SimpleType позволяет иметь текстовые элементы. Он содержит меньше атрибутов, дочерних элементов и не может оставаться пустым.
   ComplexType позволяет хранить несколько атрибутов и элементов. Он содержит дополнительные подэлементы и может быть оставлен пустым.
   Кратко:
   XSD - это язык схемы XML, рекомендуемый через W3C; DTD - это набор объявлений разметки, используемых для определения типа документа.
   XSD используется для выражения набора правил, которых должен придерживаться XML-документ; определение типа документа связывает DTD с документом XML.
##   2.8. XPath in XML.
   XPath (XML Path Language) — язык запросов к элементам XML-документа. Разработан для организации доступа к частям документа XML в файлах трансформации XSLT и является стандартом консорциума W3C. XPath призван реализовать навигацию по DOM в XML. В XPath используется компактный синтаксис, отличный от принятого в XML.
##   2.9. Связывание данных XML.
   XML data binding - относится к средству представления информации в документе XML в виде бизнес-объекта в памяти компьютера. Это позволяет приложениям получать доступ к данным в XML из объекта, а не использовать DOM или SAX для извлечения данных из прямого представления самого XML.
   Связывание данных XML выполняет автоматически, создавая сопоставление между элементами схемы XML документа, который хотим связать, и членами класса, которые будут представлены в памяти.
   Когда этот процесс применяется для преобразования XML-документа в объект, он называется unmarshalling(демаршалингом). Обратный процесс сериализации объекта как XML называется marshalling(маршалингом).
   Подходы к привязке данных можно разделить на следующие:
   На основе схемы XML: на основе существующей схемы XML создаются классы, соответствующие схеме.
   На основе классов: на основе набора классов, которые необходимо сериализовать, создается соответствующая схема XML.
   На основе сопоставления: описание сопоставления, обычно само по себе XML-документ, описывает, как существующая схема XML сопоставляется с набором классов и наоборот.
   Одной из сильных сторон привязки данных XML является возможность десериализации / сериализации объектов между программами, языками и платформами.
 ##  2.10. Пространство имен в XML.
   Пространство имён в XML – это стандарт, описывающий именованную группу имен элементов и атрибутов, служащую для обеспечения их уникальности в XML-документе.
   Все имена элементов в пределах пространства имен должны быть уникальны.
   XML-документ может содержать имена элементов и атрибутов из нескольких словарей XML. В каждом словаре задано своё пространство имён — так разрешается проблема неоднозначности имен элементов и атрибутов.
